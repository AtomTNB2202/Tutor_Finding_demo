<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Tutor Schedule</title>
  <link rel="stylesheet" href="../css/style.css"/>
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
</head>
<body class="bg-animated">
  <div id="app">
    <!-- Sidebar riêng cho Tutor -->
    <div id="sidebar"></div>

    <main class="content container">
  <header class="header-welcome fade-in">
    <div class="left">
      <h1>Tutor Schedule</h1>
      <p class="muted">Manage your sessions and availability.</p>
    </div>
  </header>

  <!-- TAB BAR -->
  <div class="mt" style="display:flex; gap:8px; flex-wrap:wrap;">
    <button id="tabSessionsBtn"
            class="btn small"
            onclick="switchTutorScheduleTab('sessions')">
      Sessions
    </button>
    <button id="tabAvailabilityBtn"
            class="btn outline small"
            onclick="switchTutorScheduleTab('availability')">
      Availability / Register slot
    </button>
  </div>

  <!-- TAB 1: SESSIONS -->
  <section id="tutorSessionsSection" class="card mt fade-in">
    <h2>Upcoming Sessions</h2>
    <table class="table" id="tutorScheduleTable">
      <thead>
        <tr>
          <th>Date</th>
          <th>Time</th>
          <th>Mentee</th>
          <th>Subject</th>
          <th>Type</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        <!-- JS fill -->
      </tbody>
    </table>
  </section>

  <!-- TAB 2: AVAILABILITY / REGISTER SLOT -->
  <section id="tutorAvailabilitySection"
           class="card mt fade-in"
           style="display:none;">
    <h2>Availability & Slots</h2>

    <!-- Form tạo slot mới -->
    <form id="slotForm"
          onsubmit="event.preventDefault(); registerNewSlot();">
      <div class="row" style="gap:8px; align-items:flex-end; flex-wrap:wrap;">
        <div class="field">
          <label for="slotDate">Date</label>
          <input type="date" id="slotDate" required />
        </div>
        <div class="field">
          <label for="slotTime">Time range</label>
          <input type="text" id="slotTime"
                 placeholder="14:00 - 16:00" required />
        </div>
        <div class="field">
          <label for="slotSubject">Subject</label>
          <input type="text" id="slotSubject"
                 placeholder="OOP / DSA / ..." required />
        </div>
        <div class="field">
          <label for="slotMode">Mode</label>
          <select id="slotMode">
            <option value="Online">Online</option>
            <option value="In person">In person</option>
          </select>
        </div>
        <button type="submit" class="btn small">
          Register Slot
        </button>
      </div>
    </form>

    <!-- Bảng danh sách slot -->
    <div class="mt">
      <h3 class="h3">Your Slots</h3>
      <table class="table" id="tutorSlotTable">
        <thead>
          <tr>
            <th>Date</th>
            <th>Time</th>
            <th>Subject</th>
            <th>Mode</th>
            <th>Status</th>
            <th>Mentee</th>
          </tr>
        </thead>
        <tbody>
          <!-- JS fill -->
        </tbody>
      </table>
    </div>
  </section>
</main>
  </div>

  <!-- Load sidebar tutor -->
  <script>
    fetch('../partials/sidebar-tutor.html')
      .then(r => r.text())
      .then(html => {
        document.getElementById('sidebar').innerHTML = html;
        const path = location.pathname.split('/').pop();
        document
          .querySelectorAll('.sidebar nav a')
          .forEach(a => {
            if (a.getAttribute('href') === path) {
              a.classList.add('active');
            }
          });
      });
  </script>
  <script src="../js/main.js"></script>
</body>
</html>
